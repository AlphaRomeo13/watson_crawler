<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Policy-based design</span></h1>
<ul>
<li><a href="/wiki/Action_language" title="Action language">Action</a></li>
<li><a href="/wiki/Agent-oriented_programming" title="Agent-oriented programming">Agent-oriented</a></li>
<li><a href="/wiki/Aspect-oriented_programming" title="Aspect-oriented programming">Aspect-oriented</a></li>
<li><a href="/wiki/Automata-based_programming" title="Automata-based programming">Automata-based</a></li>
<li><a href="/wiki/Concurrent_computing" title="Concurrent computing">Concurrent computing</a>
<ul>
<li><a href="/wiki/Relativistic_programming" title="Relativistic programming">Relativistic programming</a></li>
</ul>
</li>
<li><a href="/wiki/Data-driven_programming" title="Data-driven programming">Data-driven</a></li>
<li><a href="/wiki/Declarative_programming" title="Declarative programming">Declarative</a> (contrast: <a href="/wiki/Imperative_programming" title="Imperative programming">Imperative</a>)
<ul>
<li><a href="/wiki/Constraint_programming" title="Constraint programming">Constraint</a></li>
<li><a href="/wiki/Dataflow_programming" title="Dataflow programming">Dataflow</a>
<ul>
<li><a href="/wiki/Flow-based_programming" title="Flow-based programming">Flow-based</a></li>
<li>Cell-oriented (<a href="/wiki/Spreadsheet" title="Spreadsheet">spreadsheets</a>)</li>
<li><a href="/wiki/Reactive_programming" title="Reactive programming">Reactive</a></li>
</ul>
</li>
<li><a href="/wiki/Functional_programming" title="Functional programming">Functional</a>
<ul>
<li><a href="/wiki/Functional_logic_programming" title="Functional logic programming">Functional logic</a></li>
</ul>
</li>
<li><a href="/wiki/Logic_programming" title="Logic programming">Logic</a>
<ul>
<li><a href="/wiki/Abductive_logic_programming" title="Abductive logic programming">Abductive logic</a></li>
<li><a href="/wiki/Answer_set_programming" title="Answer set programming">Answer set</a></li>
<li><a href="/wiki/Constraint_logic_programming" title="Constraint logic programming">Constraint logic</a></li>
<li><a href="/wiki/Functional_logic_programming" title="Functional logic programming">Functional logic</a></li>
<li><a href="/wiki/Inductive_logic_programming" title="Inductive logic programming">Inductive logic</a></li>
</ul>
</li>
<li><a href="/wiki/Relational_programming" title="Relational programming">Relational</a></li>
</ul>
</li>
<li><a href="/wiki/End-user_development" title="End-user development">End-user programming</a></li>
<li><a href="/wiki/Event-driven_programming" title="Event-driven programming">Event-driven</a>
<ul>
<li><a href="/wiki/Service-oriented_architecture" title="Service-oriented architecture">Service-oriented</a></li>
<li><a href="/wiki/Time-driven_programming" title="Time-driven programming">Time-driven</a></li>
</ul>
</li>
<li><a href="/wiki/Expression-oriented_programming_language" title="Expression-oriented programming language">Expression-oriented</a></li>
<li><a href="/wiki/Feature-oriented_programming" title="Feature-oriented programming">Feature-oriented</a></li>
<li><a href="/wiki/Function-level_programming" title="Function-level programming">Function-level</a> (contrast: <a href="/wiki/Value-level_programming" title="Value-level programming">Value-level</a>)</li>
<li><a href="/wiki/Generic_programming" title="Generic programming">Generic</a></li>
<li><a href="/wiki/Imperative_programming" title="Imperative programming">Imperative</a> (contrast: <a href="/wiki/Declarative_programming" title="Declarative programming">Declarative</a>)
<ul>
<li><a href="/wiki/Procedural_programming" title="Procedural programming">Procedural</a></li>
</ul>
</li>
<li><a href="/wiki/Language-oriented_programming" title="Language-oriented programming">Language-oriented</a>
<ul>
<li><a href="/wiki/Natural_language_programming" title="Natural language programming">Natural language programming</a></li>
<li><a href="/wiki/Service-oriented_modeling#Discipline-specific_modeling" title="Service-oriented modeling">Discipline-specific</a></li>
<li><a href="/wiki/Domain-specific_language" title="Domain-specific language">Domain-specific</a></li>
<li><a href="/wiki/Grammar-oriented_programming" title="Grammar-oriented programming">Grammar-oriented</a>
<ul>
<li><a href="/wiki/Dialecting" title="Dialecting">Dialecting</a></li>
</ul>
</li>
<li><a href="/wiki/Intentional_programming" title="Intentional programming">Intentional</a></li>
</ul>
</li>
<li><a href="/wiki/Metaprogramming" title="Metaprogramming">Metaprogramming</a>
<ul>
<li><a href="/wiki/Automatic_programming" title="Automatic programming">Automatic</a></li>
<li><a href="/wiki/Reflection_(computer_programming)" title="Reflection (computer programming)">Reflective</a>
<ul>
<li><a href="/wiki/Attribute-oriented_programming" title="Attribute-oriented programming">Attribute-oriented</a></li>
</ul>
</li>
<li><a href="/wiki/Homoiconicity" title="Homoiconicity">Homoiconic</a></li>
<li><a href="/wiki/Template_metaprogramming" title="Template metaprogramming">Template</a>
<ul>
<li><strong class="selflink">Policy-based</strong></li>
</ul>
</li>
</ul>
</li>
<li><a href="/wiki/Non-structured_programming" title="Non-structured programming">Non-structured</a> (contrast: <a href="/wiki/Structured_programming" title="Structured programming">Structured</a>)
<ul>
<li><a href="/wiki/Array_programming" title="Array programming">Array</a></li>
</ul>
</li>
<li><a href="/wiki/Nondeterministic_programming" title="Nondeterministic programming">Nondeterministic</a></li>
<li><a href="/wiki/Parallel_computing" title="Parallel computing">Parallel computing</a>
<ul>
<li><a href="/wiki/Process-oriented_programming" title="Process-oriented programming">Process-oriented</a></li>
</ul>
</li>
<li><a href="/wiki/Tacit_programming" title="Tacit programming">Point-free style</a>
<ul>
<li><a href="/wiki/Concatenative_programming_language" title="Concatenative programming language">Concatenative</a></li>
</ul>
</li>
<li><a href="/wiki/Semantic-oriented_programming" title="Semantic-oriented programming">Semantic</a></li>
<li><a href="/wiki/Structured_programming" title="Structured programming">Structured</a> (contrast: <a href="/wiki/Non-structured_programming" title="Non-structured programming">Non-structured</a>)
<ul>
<li><a href="/wiki/Block_(programming)" title="Block (programming)">Block-structured</a></li>
<li><a href="/wiki/Modular_programming" title="Modular programming">Modular</a> (contrast: <a href="/wiki/Monolithic_application" title="Monolithic application">Monolithic</a>)</li>
<li><a href="/wiki/Object-oriented_programming" title="Object-oriented programming">Object-oriented (OOP)</a>
<ul>
<li>By <a href="/wiki/Separation_of_concerns" title="Separation of concerns">separation of concerns</a>:
<ul>
<li><a href="/wiki/Aspect-oriented_programming" title="Aspect-oriented programming">Aspect-oriented</a></li>
<li><a href="/wiki/Role-oriented_programming" title="Role-oriented programming">Role-oriented</a></li>
<li><a href="/wiki/Subject-oriented_programming" title="Subject-oriented programming">Subject-oriented</a></li>
</ul>
</li>
<li><a href="/wiki/Class-based_programming" title="Class-based programming">Class-based</a></li>
<li><a href="/wiki/Prototype-based_programming" title="Prototype-based programming">Prototype-based</a></li>
</ul>
</li>
<li><a href="/wiki/Recursion_(computer_science)" title="Recursion (computer science)">Recursive</a></li>
</ul>
</li>
<li><a href="/wiki/Value-level_programming" title="Value-level programming">Value-level</a> (contrast: <a href="/wiki/Function-level_programming" title="Function-level programming">Function-level</a>)</li>
<li><a href="/wiki/Probabilistic_programming_language" title="Probabilistic programming language">Probabilistic</a></li>
<li><a href="/wiki/Concept_programming" title="Concept programming">Concept</a></li>
</ul>
<ul>
<li><a href="/wiki/Relativistic_programming" title="Relativistic programming">Relativistic programming</a></li>
</ul>
<ul>
<li><a href="/wiki/Constraint_programming" title="Constraint programming">Constraint</a></li>
<li><a href="/wiki/Dataflow_programming" title="Dataflow programming">Dataflow</a>
<ul>
<li><a href="/wiki/Flow-based_programming" title="Flow-based programming">Flow-based</a></li>
<li>Cell-oriented (<a href="/wiki/Spreadsheet" title="Spreadsheet">spreadsheets</a>)</li>
<li><a href="/wiki/Reactive_programming" title="Reactive programming">Reactive</a></li>
</ul>
</li>
<li><a href="/wiki/Functional_programming" title="Functional programming">Functional</a>
<ul>
<li><a href="/wiki/Functional_logic_programming" title="Functional logic programming">Functional logic</a></li>
</ul>
</li>
<li><a href="/wiki/Logic_programming" title="Logic programming">Logic</a>
<ul>
<li><a href="/wiki/Abductive_logic_programming" title="Abductive logic programming">Abductive logic</a></li>
<li><a href="/wiki/Answer_set_programming" title="Answer set programming">Answer set</a></li>
<li><a href="/wiki/Constraint_logic_programming" title="Constraint logic programming">Constraint logic</a></li>
<li><a href="/wiki/Functional_logic_programming" title="Functional logic programming">Functional logic</a></li>
<li><a href="/wiki/Inductive_logic_programming" title="Inductive logic programming">Inductive logic</a></li>
</ul>
</li>
<li><a href="/wiki/Relational_programming" title="Relational programming">Relational</a></li>
</ul>
<ul>
<li><a href="/wiki/Flow-based_programming" title="Flow-based programming">Flow-based</a></li>
<li>Cell-oriented (<a href="/wiki/Spreadsheet" title="Spreadsheet">spreadsheets</a>)</li>
<li><a href="/wiki/Reactive_programming" title="Reactive programming">Reactive</a></li>
</ul>
<ul>
<li><a href="/wiki/Functional_logic_programming" title="Functional logic programming">Functional logic</a></li>
</ul>
<ul>
<li><a href="/wiki/Abductive_logic_programming" title="Abductive logic programming">Abductive logic</a></li>
<li><a href="/wiki/Answer_set_programming" title="Answer set programming">Answer set</a></li>
<li><a href="/wiki/Constraint_logic_programming" title="Constraint logic programming">Constraint logic</a></li>
<li><a href="/wiki/Functional_logic_programming" title="Functional logic programming">Functional logic</a></li>
<li><a href="/wiki/Inductive_logic_programming" title="Inductive logic programming">Inductive logic</a></li>
</ul>
<ul>
<li><a href="/wiki/Service-oriented_architecture" title="Service-oriented architecture">Service-oriented</a></li>
<li><a href="/wiki/Time-driven_programming" title="Time-driven programming">Time-driven</a></li>
</ul>
<ul>
<li><a href="/wiki/Procedural_programming" title="Procedural programming">Procedural</a></li>
</ul>
<ul>
<li><a href="/wiki/Natural_language_programming" title="Natural language programming">Natural language programming</a></li>
<li><a href="/wiki/Service-oriented_modeling#Discipline-specific_modeling" title="Service-oriented modeling">Discipline-specific</a></li>
<li><a href="/wiki/Domain-specific_language" title="Domain-specific language">Domain-specific</a></li>
<li><a href="/wiki/Grammar-oriented_programming" title="Grammar-oriented programming">Grammar-oriented</a>
<ul>
<li><a href="/wiki/Dialecting" title="Dialecting">Dialecting</a></li>
</ul>
</li>
<li><a href="/wiki/Intentional_programming" title="Intentional programming">Intentional</a></li>
</ul>
<ul>
<li><a href="/wiki/Dialecting" title="Dialecting">Dialecting</a></li>
</ul>
<ul>
<li><a href="/wiki/Automatic_programming" title="Automatic programming">Automatic</a></li>
<li><a href="/wiki/Reflection_(computer_programming)" title="Reflection (computer programming)">Reflective</a>
<ul>
<li><a href="/wiki/Attribute-oriented_programming" title="Attribute-oriented programming">Attribute-oriented</a></li>
</ul>
</li>
<li><a href="/wiki/Homoiconicity" title="Homoiconicity">Homoiconic</a></li>
<li><a href="/wiki/Template_metaprogramming" title="Template metaprogramming">Template</a>
<ul>
<li><strong class="selflink">Policy-based</strong></li>
</ul>
</li>
</ul>
<ul>
<li><a href="/wiki/Attribute-oriented_programming" title="Attribute-oriented programming">Attribute-oriented</a></li>
</ul>
<ul>
<li><strong class="selflink">Policy-based</strong></li>
</ul>
<ul>
<li><a href="/wiki/Array_programming" title="Array programming">Array</a></li>
</ul>
<ul>
<li><a href="/wiki/Process-oriented_programming" title="Process-oriented programming">Process-oriented</a></li>
</ul>
<ul>
<li><a href="/wiki/Concatenative_programming_language" title="Concatenative programming language">Concatenative</a></li>
</ul>
<ul>
<li><a href="/wiki/Block_(programming)" title="Block (programming)">Block-structured</a></li>
<li><a href="/wiki/Modular_programming" title="Modular programming">Modular</a> (contrast: <a href="/wiki/Monolithic_application" title="Monolithic application">Monolithic</a>)</li>
<li><a href="/wiki/Object-oriented_programming" title="Object-oriented programming">Object-oriented (OOP)</a>
<ul>
<li>By <a href="/wiki/Separation_of_concerns" title="Separation of concerns">separation of concerns</a>:
<ul>
<li><a href="/wiki/Aspect-oriented_programming" title="Aspect-oriented programming">Aspect-oriented</a></li>
<li><a href="/wiki/Role-oriented_programming" title="Role-oriented programming">Role-oriented</a></li>
<li><a href="/wiki/Subject-oriented_programming" title="Subject-oriented programming">Subject-oriented</a></li>
</ul>
</li>
<li><a href="/wiki/Class-based_programming" title="Class-based programming">Class-based</a></li>
<li><a href="/wiki/Prototype-based_programming" title="Prototype-based programming">Prototype-based</a></li>
</ul>
</li>
<li><a href="/wiki/Recursion_(computer_science)" title="Recursion (computer science)">Recursive</a></li>
</ul>
<ul>
<li>By <a href="/wiki/Separation_of_concerns" title="Separation of concerns">separation of concerns</a>:
<ul>
<li><a href="/wiki/Aspect-oriented_programming" title="Aspect-oriented programming">Aspect-oriented</a></li>
<li><a href="/wiki/Role-oriented_programming" title="Role-oriented programming">Role-oriented</a></li>
<li><a href="/wiki/Subject-oriented_programming" title="Subject-oriented programming">Subject-oriented</a></li>
</ul>
</li>
<li><a href="/wiki/Class-based_programming" title="Class-based programming">Class-based</a></li>
<li><a href="/wiki/Prototype-based_programming" title="Prototype-based programming">Prototype-based</a></li>
</ul>
<ul>
<li><a href="/wiki/Aspect-oriented_programming" title="Aspect-oriented programming">Aspect-oriented</a></li>
<li><a href="/wiki/Role-oriented_programming" title="Role-oriented programming">Role-oriented</a></li>
<li><a href="/wiki/Subject-oriented_programming" title="Subject-oriented programming">Subject-oriented</a></li>
</ul>
<ul>
<li class="nv-view"><a href="/wiki/Template:Programming_paradigms" title="Template:Programming paradigms"><span title="View this template" style=";">v</span></a></li>
<li class="nv-talk"><a href="/wiki/Template_talk:Programming_paradigms" title="Template talk:Programming paradigms"><span title="Discuss this template" style=";">t</span></a></li>
<li class="nv-edit"><a class="external text" href="//en.wikipedia.org/w/index.php?title=Template:Programming_paradigms&amp;action=edit"><span title="Edit this template" style=";">e</span></a></li>
</ul>
<p><b>Policy-based design</b>, also known as <b>policy-based class design</b> or <b>policy-based programming</b>, is a computer <a href="/wiki/Programming_paradigm" title="Programming paradigm">programming paradigm</a> based on an <a href="/wiki/Idiom#Computer_science" title="Idiom">idiom</a> for <a href="/wiki/C%2B%2B" title="C++">C++</a> known as <b>policies</b>. It has been described as a <a href="/wiki/Compile-time" title="Compile-time" class="mw-redirect">compile-time</a> variant of the <a href="/wiki/Strategy_pattern" title="Strategy pattern">strategy pattern</a>, and has connections with C++ <a href="/wiki/Template_metaprogramming" title="Template metaprogramming">template metaprogramming</a>. It was first popularized by <a href="/wiki/Andrei_Alexandrescu" title="Andrei Alexandrescu">Andrei Alexandrescu</a> with his 2001 book <i><a href="/wiki/Modern_C%2B%2B_Design" title="Modern C++ Design">Modern C++ Design</a></i> and his column <i>Generic&lt;Programming&gt;</i> in the <i><a href="/wiki/C/C%2B%2B_Users_Journal" title="C/C++ Users Journal">C/C++ Users Journal</a></i>.</p>
<p>Although the technique could theoretically be applied to other languages, it is currently closely associated with C++, and depends on the particular feature set of that language. Furthermore, even in C++ it requires a <a href="/wiki/Compiler" title="Compiler">compiler</a> with highly <a href="/wiki/Robustness_(computer_science)" title="Robustness (computer science)">robust</a> support for <a href="/wiki/Template_(programming)" title="Template (programming)" class="mw-redirect">templates</a>, which wasn't common before about 2003.</p>
<p></p>
<h2>Contents</h2>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Simple_example"><span class="tocnumber">2</span> <span class="toctext">Simple example</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#See_also"><span class="tocnumber">3</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#External_links"><span class="tocnumber">4</span> <span class="toctext">External links</span></a></li>
</ul>
<p></p>
<h2><span class="mw-headline" id="Overview">Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Policy-based_design&amp;action=edit&amp;section=1" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The central idiom in policy-based design is a <a href="/wiki/Class_(computer_science)" title="Class (computer science)" class="mw-redirect">class</a> template (called the <i>host</i> class), taking several <a href="/wiki/Data_type" title="Data type">type</a> <a href="/wiki/Parameter_(computer_science)" title="Parameter (computer science)" class="mw-redirect">parameters</a> as input, which are <a href="/wiki/Instantiation_(computer_science)" title="Instantiation (computer science)" class="mw-redirect">instantiated</a> with types selected by the user (called <i>policy classes</i>), each <a href="/wiki/Implementation" title="Implementation">implementing</a> a particular implicit <a href="/wiki/Interface_(computer_science)" title="Interface (computer science)" class="mw-redirect">interface</a> (called a <i>policy</i>), and <a href="/wiki/Separation_of_concerns" title="Separation of concerns">encapsulating</a> some <a href="/wiki/Orthogonality#Computer_science" title="Orthogonality">orthogonal</a> (or mostly orthogonal) aspect of the behavior of the instantiated host class. By supplying a host class combined with a set of different, canned implementations for each policy, a <a href="/wiki/Library_(computing)" title="Library (computing)">library</a> or <a href="/wiki/Module_(programming)" title="Module (programming)" class="mw-redirect">module</a> can support an <a href="/wiki/Exponential_growth" title="Exponential growth">exponential</a> number of different behavior combinations, resolved at compile time, and selected by mixing and matching the different supplied policy classes in the instantiation of the host class template. Additionally, by writing a custom implementation of a given policy, a policy-based library can be used in situations requiring behaviors unforeseen by the library implementor. Even in cases where no more than one implementation of each policy will ever be used, decomposing a class into policies can aid the design process, by increasing modularity and highlighting exactly where orthogonal design decisions have been made.</p>
<p>While assembling software components out of interchangeable modules is a far from new concept, policy-based design represents an innovation in the way it applies that concept at the (relatively low) level of defining the behavior of an individual class. Policy classes have some similarity to <a href="/wiki/Callback_(computer_science)" title="Callback (computer science)" class="mw-redirect">callbacks</a>, but differ in that, rather than consisting of a single <a href="/wiki/Subroutine" title="Subroutine">function</a>, a policy class will typically contain several related functions (<a href="/wiki/Method_(computer_science)" title="Method (computer science)" class="mw-redirect">methods</a>), often combined with <a href="/wiki/State_(computer_science)" title="State (computer science)">state</a> <a href="/wiki/Variable_(programming)" title="Variable (programming)" class="mw-redirect">variables</a> and/or other facilities such as nested types. A policy-based host class can be thought of as a type of <a href="/wiki/Template_metaprogramming" title="Template metaprogramming">metafunction</a>, taking a set of behaviors represented by types as input, and returning as output a type representing the result of combining those behaviors into a functioning whole. (Unlike <a href="/wiki/Boost_C%2B%2B_Libraries" title="Boost C++ Libraries" class="mw-redirect">MPL</a> metafunctions, however, the output is usually represented by the instantiated host class itself, rather than a nested output type.)</p>
<p>A key feature of the <i>policy</i> idiom is that, usually (though it is not strictly necessary), the host class will <a href="/wiki/Inheritance_(computer_science)" title="Inheritance (computer science)" class="mw-redirect">derive</a> from (make itself a <a href="/wiki/Subclass_(computer_science)" title="Subclass (computer science)" class="mw-redirect">child class</a> of) each of its policy classes using (public) <a href="/wiki/Multiple_inheritance" title="Multiple inheritance">multiple inheritance</a>. (Alternatives are for the host class to merely contain a member variable of each policy class type, or else to inherit the policy classes privately; however inheriting the policy classes publicly has the major advantage that a policy class can add new methods, inherited by the instantiated host class and accessible to its users, which the host class itself need not even know about.) A notable feature of this aspect of the policy idiom is that, relative to <a href="/wiki/Object-oriented_programming" title="Object-oriented programming">object-oriented programming</a>, policies invert the relationship between <a href="/wiki/Superclass_(computer_science)" title="Superclass (computer science)" class="mw-redirect">base class</a> and derived class - whereas in OOP interfaces are traditionally represented by (<a href="/wiki/Virtual_function#Abstract_classes_and_pure_virtual_functions" title="Virtual function">abstract</a>) base classes and implementations of interfaces by derived classes, in policy-based design the derived (host) class represents the interfaces and the base (policy) classes implement them. It should also be noted that in the case of policies, the public inheritance does not represent an is-a relationship between the host and the policy classes. While this would traditionally be considered evidence of a design defect in OOP contexts, this doesn't apply in the context of the policy idiom.</p>
<p>A disadvantage of policies in their current incarnation is that the policy interface doesn't have a direct, explicit representation in <a href="/wiki/Source_code" title="Source code">code</a>, but rather is defined implicitly, via <a href="/wiki/Duck_typing" title="Duck typing">duck typing</a>, and must be documented separately and manually, in <a href="/wiki/Comment_(computer_programming)" title="Comment (computer programming)">comments</a>. The main idea is to use commonality-variability analysis to divide the type into the fixed implementation and interface, the policy-based class, and the different policies. The trick is to know what goes into the main class, and what policies should one create. The article mentioned above gives the following answer: wherever we would need to make a possible limiting design decision, we should postpone that decision, we should delegate it to an appropriately named policy.</p>
<p>Policy classes can contain implementation, type definitions and so forth. Basically, the designer of the main template class will define what the policy classes should provide, what customization points they need to implement.</p>
<p>It may be a delicate task to create a good set of policies, just the right number (e.g., the minimum necessary). The different customization points, which belong together, should go into one policy argument, such as storage policy, validation policy and so forth. A good rule of thumb during design is that you should be able to give a name to your policy, which represents a concept, and not one which represent an operation or some really tiny implementation detail. Persistence policy seems to be a good choice, while how to save policy does not.</p>
<p>Policy-based design may incorporate other techniques which will be useful, even if changed. One example is that the <a href="/wiki/Template_method_pattern" title="Template method pattern">template method pattern</a> can be reinterpreted for compile time; so that your main class has a <a href="/wiki/Skeleton_algorithm" title="Skeleton algorithm" class="mw-redirect">skeleton algorithm</a>, which — at customization points — calls the appropriate functions of some of the policies. You will also find yourself in using your policy classes as traits are used, asking type information, delegating type related tasks to it, a storage policy is one example where it can happen.</p>
<h2><span class="mw-headline" id="Simple_example">Simple example</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Policy-based_design&amp;action=edit&amp;section=2" title="Edit section: Simple example">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Presented below is a simple (contrived) example of a C++ <a href="/wiki/Hello_world_program" title="Hello world program" class="mw-redirect">hello world program</a>, where the text to be printed and the method of printing it are decomposed using policies.</p>
<p>WHATSON? 2f0be908-6307-4a54-9b6e-9de1ed194b2f</p>
<pre class="de1">
<span class="co2">#include &lt;iostream&gt;</span>
<span class="co2">#include &lt;string&gt;</span>
 
<span class="kw2">template</span> <span class="sy1">&lt;</span><span class="kw2">typename</span> OutputPolicy, <span class="kw2">typename</span> LanguagePolicy<span class="sy1">&gt;</span>
<span class="kw2">class</span> HelloWorld <span class="sy4">:</span> <span class="kw2">private</span> OutputPolicy, <span class="kw2">private</span> LanguagePolicy
<span class="br0">{</span>
    <span class="kw2">using</span> OutputPolicy<span class="sy4">::</span><span class="me2">print</span><span class="sy4">;</span>
    <span class="kw2">using</span> LanguagePolicy<span class="sy4">::</span><span class="me2">message</span><span class="sy4">;</span>
 
<span class="kw2">public</span><span class="sy4">:</span>
    <span class="co1">// Behaviour method</span>
    <span class="kw4">void</span> run<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span>
    <span class="br0">{</span>
        <span class="co1">// Two policy methods</span>
        print<span class="br0">(</span>message<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span><span class="sy4">;</span>
 
<span class="kw2">class</span> OutputPolicyWriteToCout
<span class="br0">{</span>
<span class="kw2">protected</span><span class="sy4">:</span>
    <span class="kw2">template</span><span class="sy1">&lt;</span><span class="kw2">typename</span> MessageType<span class="sy1">&gt;</span>
    <span class="kw4">void</span> print<span class="br0">(</span>MessageType <span class="kw4">const</span> <span class="sy3">&amp;</span>message<span class="br0">)</span> <span class="kw4">const</span>
    <span class="br0">{</span>
        std<span class="sy4">::</span><span class="kw3">cout</span> <span class="sy1">&lt;&lt;</span> message <span class="sy1">&lt;&lt;</span> std<span class="sy4">::</span><span class="me2">endl</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span><span class="sy4">;</span>
 
<span class="kw2">class</span> LanguagePolicyEnglish
<span class="br0">{</span>
<span class="kw2">protected</span><span class="sy4">:</span>
    std<span class="sy4">::</span><span class="me2">string</span> message<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span>
    <span class="br0">{</span>
        <span class="kw1">return</span> <span class="st0">"Hello, World!"</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span><span class="sy4">;</span>
 
<span class="kw2">class</span> LanguagePolicyGerman
<span class="br0">{</span>
<span class="kw2">protected</span><span class="sy4">:</span>
    std<span class="sy4">::</span><span class="me2">string</span> message<span class="br0">(</span><span class="br0">)</span> <span class="kw4">const</span>
    <span class="br0">{</span>
        <span class="kw1">return</span> <span class="st0">"Hallo Welt!"</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span><span class="sy4">;</span>
 
<span class="kw4">int</span> main<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="coMULTI">/* Example 1 */</span>
    <span class="kw4">typedef</span> HelloWorld<span class="sy1">&lt;</span>OutputPolicyWriteToCout, LanguagePolicyEnglish<span class="sy1">&gt;</span> HelloWorldEnglish<span class="sy4">;</span>
 
    HelloWorldEnglish hello_world<span class="sy4">;</span>
    hello_world.<span class="me1">run</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// prints "Hello, World!"</span>
 
    <span class="coMULTI">/* Example 2 
     * Does the same, but uses another language policy */</span>
    <span class="kw4">typedef</span> HelloWorld<span class="sy1">&lt;</span>OutputPolicyWriteToCout, LanguagePolicyGerman<span class="sy1">&gt;</span> HelloWorldGerman<span class="sy4">;</span>
 
    HelloWorldGerman hello_world2<span class="sy4">;</span>
    hello_world2.<span class="me1">run</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// prints "Hallo Welt!"</span>
<span class="br0">}</span>
</pre>
<p>You could easily write another OutputPolicy by adding a new class with the member function print() and take that as the new OutputPolicy.</p>
<h2><span class="mw-headline" id="See_also">See also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Policy-based_design&amp;action=edit&amp;section=3" title="Edit section: See also">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><a href="/wiki/Mixin" title="Mixin">Mixin</a></li>
</ul>
<h2><span class="mw-headline" id="External_links">External links</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Policy-based_design&amp;action=edit&amp;section=4" title="Edit section: External links">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="http://erdani.org/">Andrei Alexandrescu's Web site</a></li>
</ul>
