<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Guard (computer science)</span></h1>
<p>In computer programming, a <b>guard</b> is a <a href="/wiki/Boolean_datatype" title="Boolean datatype" class="mw-redirect">boolean</a> <a href="/wiki/Expression_(programming)" title="Expression (programming)" class="mw-redirect">expression</a> that must evaluate to true if the program execution is to continue in the branch in question.</p>
<p>Regardless of which programming language is used, <b>guard code</b> is a check of integrity preconditions used to avoid errors during execution. A typical example is checking that a reference about to be processed be not null, which avoids null-pointer failures.</p>
<p>The term is used with specific meaning a.o. in <a href="/wiki/Haskell_(programming_language)" title="Haskell (programming language)">Haskell</a>, <a href="/wiki/Clean_programming_language" title="Clean programming language" class="mw-redirect">Clean</a>, <a href="/wiki/Erlang_programming_language" title="Erlang programming language" class="mw-redirect">Erlang</a>, <a href="/wiki/Occam_(programming_language)" title="Occam (programming language)">occam</a>, <a href="/wiki/Promela" title="Promela">Promela</a>, <a href="/wiki/OCaml" title="OCaml">OCaml</a> and <a href="/wiki/Scala_(programming_language)" title="Scala (programming language)">Scala</a> programming languages.<sup class="noprint Inline-Template Template-Fact" style="white-space:nowrap;">[<i><a href="/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed"><span title="This claim needs references to reliable sources. (March 2012)">citation needed</span></a></i>]</sup> In <a href="/wiki/Mathematica" title="Mathematica">Mathematica</a>, guards are called <i>constraints</i>. Guards are the fundamental concept in <a href="/wiki/Guarded_Command_Language" title="Guarded Command Language">Guarded Command Language</a>, a language in <a href="/wiki/Formal_methods" title="Formal methods">formal methods</a>. Guards can be used to augment <a href="/wiki/Pattern_matching" title="Pattern matching">pattern matching</a> with the possibility to skip a pattern even if the structure matches. Boolean expressions in <a href="/wiki/Conditional_(programming)" title="Conditional (programming)" class="mw-redirect">conditional statements</a> usually also fit this definition of a guard although they are called <i>conditions</i>.</p>
<p>In the following Haskell example, the guards occur between each pair of "|" and "=":</p>
<p>WHATSON? 96e09732-8b1e-4d4f-8412-0abe61765185</p>
<pre class="de1">
f x
 <span class="sy0">|</span> x <span class="sy0">&gt;</span> <span class="nu0">0</span> <span class="sy0">=</span> <span class="nu0">1</span>
 <span class="sy0">|</span> <span class="kw3">otherwise</span> <span class="sy0">=</span> <span class="nu0">0</span>
</pre>
<p>This is similar to the respective mathematical notation:</p>
<p><img class="mwe-math-fallback-image-inline tex" alt="
f(x) = \left\{ \begin{matrix}
 1 &amp; \mbox{if } x&gt;0 \\
 0 &amp; \mbox{otherwise}
 \end{matrix}
 \right.
" src="//upload.wikimedia.org/math/8/1/b/81be65912eb09e5eb077bc550ad8adb5.png"></p>
<p>In this case the guards are in the "if" and "otherwise" clauses.</p>
<p>If there are several parallel guards, such as in the example above, they are normally tried in a top to bottom order and the branch of the first to pass is chosen. Guards in a list of cases are typically parallel.</p>
<p>However, in Haskell <a href="/wiki/List_comprehension" title="List comprehension">list comprehensions</a> the guards are in series, and if any of them fails, the list element is not produced. This would be the same as combining the separate guards with <a href="/wiki/Logical_conjunction" title="Logical conjunction">logical AND</a>, except that there can be other list comprehension clauses among the guards.</p>
<p></p>
<h2>Contents</h2>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Evolution"><span class="tocnumber">1</span> <span class="toctext">Evolution</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Pattern_guard"><span class="tocnumber">2</span> <span class="toctext">Pattern guard</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#See_also"><span class="tocnumber">3</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#References"><span class="tocnumber">4</span> <span class="toctext">References</span></a></li>
</ul>
<p></p>
<h2><span class="mw-headline" id="Evolution">Evolution</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Guard_(computer_science)&amp;action=edit&amp;section=1" title="Edit section: Evolution">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>A simple conditional expression, already present in <a href="/wiki/CPL_programming_language" title="CPL programming language" class="mw-redirect">CPL</a> in 1963, has a guard on first sub-expression, and another sub-expression to use in case the first one cannot be used. Some common ways to write this:</p>
<p>WHATSON? 4b8d5dbc-167d-4600-886e-cc1f1abc1211</p>
<pre>
(x&gt;0) -&gt; 1/x; 0
x&gt;0 ? 1/x : 0
</pre>
<p>If the second sub-expression can be a further simple conditional expression, we can give more alternatives to try before the last <i>fall-through</i>:</p>
<p>WHATSON? 6b37fd86-9b3d-4bcd-b116-7f5675c9e5bd</p>
<pre>
(x&gt;0) -&gt; 1/x; (x&lt;0) -&gt; -1/x; 0
</pre>
<p>In 1966 <a href="/wiki/ISWIM" title="ISWIM">ISWIM</a> had a form of conditional expression without an obligatory fall-through case, thus separating guard from the concept of choosing either-or. In the case of ISWIM, if none of the alternatives could be used, the value was to be <i>undefined</i>, which was defined to never compute into a value.</p>
<p><a href="/wiki/SASL_programming_language" title="SASL programming language" class="mw-redirect">SASL</a> (1976) was one of the first programming languages to use the term "guard". In the language, functions could have several definitions and the one to apply was chosen based on the guards that followed each definition:</p>
<p>WHATSON? 55ac833c-c025-4422-b759-b08086e5532e</p>
<pre class="de1">
 fac n <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">,</span> n <span class="sy0">=</span> <span class="nu0">0</span>
 <span class="sy0">=</span> n <span class="sy0">*</span> fac <span class="br0">(</span>n<span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span><span class="sy0">,</span> n <span class="sy0">&gt;</span> <span class="nu0">0</span>
</pre>
<h2><span class="mw-headline" id="Pattern_guard">Pattern guard</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Guard_(computer_science)&amp;action=edit&amp;section=2" title="Edit section: Pattern guard">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In addition to a guard attached to a pattern, <b>pattern guard</b> can refer to the use of <a href="/wiki/Pattern_matching" title="Pattern matching">pattern matching</a> in the context of a guard. In effect, a match of the pattern is taken to mean pass. This meaning was introduced in a proposal for Haskell by <a href="/wiki/Simon_Peyton_Jones" title="Simon Peyton Jones">Simon Peyton Jones</a> titled <a rel="nofollow" class="external text" href="http://research.microsoft.com/Users/simonpj/Haskell/guards.html">A new view of guards</a> in April 1997 and was used in the implementation of the proposal. The feature provides the ability to use patterns in the guards of a pattern.</p>
<p>An example in extended Haskell:</p>
<p>WHATSON? 09cac609-0b03-41c4-875f-6d1b78bc8e5d</p>
<pre class="de1">
 clunky env var1 var2
 <span class="sy0">|</span> Just val1 <span class="sy0">&lt;-</span> <span class="kw3">lookup</span> env var1
 <span class="sy0">,</span> Just val2 <span class="sy0">&lt;-</span> <span class="kw3">lookup</span> env var2
 <span class="sy0">=</span> val1 <span class="sy0">+</span> val2
 <span class="co1">-- ...other equations for clunky...</span>
</pre>
<p>This would read: "Clunky for an environment and two variables, <i>in case the lookups of the variables from the environment produce values</i>, is the sum of the values. ..." As in <a href="/wiki/List_comprehension" title="List comprehension">list comprehensions</a>, the guards are in series, and if any of them fails the branch is not taken.</p>
<h2><span class="mw-headline" id="See_also">See also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Guard_(computer_science)&amp;action=edit&amp;section=3" title="Edit section: See also">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><a href="/wiki/Assertion_(computing)" title="Assertion (computing)" class="mw-redirect">Assertion</a></li>
<li><a href="/wiki/Logical_conditional" title="Logical conditional" class="mw-redirect">Logical conditional</a></li>
<li><a href="/wiki/Switch_statement" title="Switch statement">Switch statement</a></li>
<li><a href="/wiki/Iverson_bracket" title="Iverson bracket">Iverson bracket</a></li>
<li><a href="/wiki/Guarded_suspension" title="Guarded suspension">Guarded suspension</a></li>
</ul>
<h2><span class="mw-headline" id="References">References</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Guard_(computer_science)&amp;action=edit&amp;section=4" title="Edit section: References">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="http://foldoc.org/guard">Guard</a> in <i>Free On-Line Dictionary of Computing - FOLDOC</i>, Denis Howe (editor).</li>
<li><i>The Haskell 98 Report</i>, chapter <a rel="nofollow" class="external text" href="http://haskell.org/onlinereport/exps.html">3 Expressions</a>.</li>
<li><i>The Mathematica Book,</i> section <a rel="nofollow" class="external text" href="http://documents.wolfram.com/mathematica/book/section-2.3.5">2.3.5 Putting Constraints on Patterns</a></li>
<li><i>The Glorious Glasgow Haskell Compilation System User's Guide</i>, Version 6.4, section <a rel="nofollow" class="external text" href="http://www.haskell.org/ghc/docs/latest/html/users_guide/syntax-extns.html#pattern-guards">7.3.2. Pattern guards</a></li>
</ul>
