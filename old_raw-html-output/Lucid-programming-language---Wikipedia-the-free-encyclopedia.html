<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Lucid (programming language)</span></h1>
<p><b>Lucid</b> is a <a href="/wiki/Dataflow" title="Dataflow">dataflow programming</a> language. It is designed to experiment with non-<a href="/wiki/Von_Neumann_architecture" title="Von Neumann architecture">von Neumann</a> programming models. It was designed by <a href="/w/index.php?title=Bill_Wadge&amp;action=edit&amp;redlink=1" class="new" title="Bill Wadge (page does not exist)">Bill Wadge</a> and <a href="/w/index.php?title=Ed_Ashcroft&amp;action=edit&amp;redlink=1" class="new" title="Ed Ashcroft (page does not exist)">Ed Ashcroft</a> and described in the book <i>Lucid, the Dataflow Programming Language</i>.</p>
<p></p>
<h2>Contents</h2>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Model"><span class="tocnumber">1</span> <span class="toctext">Model</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Details"><span class="tocnumber">2</span> <span class="toctext">Details</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Examples"><span class="tocnumber">3</span> <span class="toctext">Examples</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Factorial"><span class="tocnumber">3.1</span> <span class="toctext">Factorial</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Fibonacci_sequence"><span class="tocnumber">3.2</span> <span class="toctext">Fibonacci sequence</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Total_of_a_Sequence"><span class="tocnumber">3.3</span> <span class="toctext">Total of a Sequence</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Running_Average"><span class="tocnumber">3.4</span> <span class="toctext">Running Average</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Prime_numbers"><span class="tocnumber">3.5</span> <span class="toctext">Prime numbers</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Dataflow_diagram"><span class="tocnumber">3.5.1</span> <span class="toctext">Dataflow diagram</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10"><a href="#Quick_sort"><span class="tocnumber">3.6</span> <span class="toctext">Quick sort</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Data_flow_diagram"><span class="tocnumber">3.6.1</span> <span class="toctext">Data flow diagram</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="#Square_root"><span class="tocnumber">3.7</span> <span class="toctext">Square root</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Hamming_problem"><span class="tocnumber">3.8</span> <span class="toctext">Hamming problem</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Dataflow_Diagram_2"><span class="tocnumber">3.8.1</span> <span class="toctext">Dataflow Diagram</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#External_links"><span class="tocnumber">4</span> <span class="toctext">External links</span></a></li>
</ul>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Factorial"><span class="tocnumber">3.1</span> <span class="toctext">Factorial</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Fibonacci_sequence"><span class="tocnumber">3.2</span> <span class="toctext">Fibonacci sequence</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Total_of_a_Sequence"><span class="tocnumber">3.3</span> <span class="toctext">Total of a Sequence</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Running_Average"><span class="tocnumber">3.4</span> <span class="toctext">Running Average</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Prime_numbers"><span class="tocnumber">3.5</span> <span class="toctext">Prime numbers</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Dataflow_diagram"><span class="tocnumber">3.5.1</span> <span class="toctext">Dataflow diagram</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10"><a href="#Quick_sort"><span class="tocnumber">3.6</span> <span class="toctext">Quick sort</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Data_flow_diagram"><span class="tocnumber">3.6.1</span> <span class="toctext">Data flow diagram</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="#Square_root"><span class="tocnumber">3.7</span> <span class="toctext">Square root</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Hamming_problem"><span class="tocnumber">3.8</span> <span class="toctext">Hamming problem</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Dataflow_Diagram_2"><span class="tocnumber">3.8.1</span> <span class="toctext">Dataflow Diagram</span></a></li>
</ul>
</li>
</ul>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Dataflow_diagram"><span class="tocnumber">3.5.1</span> <span class="toctext">Dataflow diagram</span></a></li>
</ul>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Data_flow_diagram"><span class="tocnumber">3.6.1</span> <span class="toctext">Data flow diagram</span></a></li>
</ul>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Dataflow_Diagram_2"><span class="tocnumber">3.8.1</span> <span class="toctext">Dataflow Diagram</span></a></li>
</ul>
<p></p>
<h2><span class="mw-headline" id="Model">Model</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=1" title="Edit section: Model">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>Lucid</b> uses a demand-driven model for data computation. Each statement can be understood as an equation defining a network of processors and communication lines between them through which data flows. Each <a href="/wiki/Variable_(computer_science)" title="Variable (computer science)">variable</a> is an infinite stream of values and every function is a filter or a transformer. <a href="/wiki/Iteration" title="Iteration">Iteration</a> is simulated by 'current' values and 'fby' (read as 'followed by') operator allowing composition of streams.</p>
<p>Lucid is based on an <a href="/wiki/Algebra" title="Algebra">algebra</a> of histories, a history being an infinite sequence of data items. Operationally, a history can be thought of as a record of the changing values of a variable, history operations such as first and next can be understood in ways suggested by their names. Lucid was originally conceived as a kind of very disciplined mathematically pure single assignment language in which verification would be very much simplified. However, the <a href="/wiki/Dataflow" title="Dataflow">dataflow</a> interpretation has been very important in helping the direction in which Lucid has evolved.<a rel="nofollow" class="external autonumber" href="http://www.chilton-computing.org.uk/acd/dcs/projects/p026.htm">[1]</a></p>
<h2><span class="mw-headline" id="Details">Details</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=2" title="Edit section: Details">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In Lucid (and other <a href="/wiki/Dataflow" title="Dataflow">dataflow</a> languages) an expression that contains a variable that was not yet <a href="/wiki/Free_variables_and_bound_variables" title="Free variables and bound variables">bound</a> waits until the variable is bound before proceeding. An expression like <code>x + y</code> will wait until both x and y are bound before returning with the output of the expression. An important result of this is that explicit logic for updating related values is avoided, which results in substantial code reduction compared to mainstream languages.</p>
<p>Each variable in Lucid is a stream of values. An expression <code>n = 1 fby n + 1</code> defines a stream using the operator 'fby' (a <a href="/wiki/Mnemonic" title="Mnemonic">mnemonic</a> for "followed by"). fby defines what comes after the previous expression. (In this instance the stream produces 1,2,3,...). The values in a stream can be addressed by these operators (assuming x is the variable being used):</p>
<p><code>'first x'</code> - fetches the first value in the stream x,</p>
<p><code>'x'</code> - the current value of the stream,</p>
<p><code>'next x'</code> - fetches the next value in the stream.</p>
<p><code>'asa'</code> - an operator that does some thing 'as soon as' the condition given becomes true.</p>
<p><code>'x upon p'</code> - upon is an operator that repeats the old value of the stream x, and updates to the new values only when the stream p makes a <code>true</code> value available. (It serves to slow down the stream x) i.e.: <code>x upon p</code> is the stream x with new values appearing upon the truth of p.</p>
<p>The computation is carried out by defining filters or transformation functions that act on these time-varying streams of data.</p>
<p>pLucid was the first <a href="/wiki/Interpreter" title="Interpreter" class="mw-redirect">interpreter</a> for Lucid.</p>
<h2><span class="mw-headline" id="Examples">Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=3" title="Edit section: Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Factorial"><a href="/wiki/Factorial" title="Factorial">Factorial</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=4" title="Edit section: Factorial">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>WHATSON? b972e162-7fb3-477e-976d-aef15edfd3c5</p>
<pre>
fac
  where
    n = 0 fby (n + 1);
    fac = 1 fby ( fac * (n + 1) );
  end

</pre>
<h3><span class="mw-headline" id="Fibonacci_sequence"><a href="/wiki/Fibonacci_sequence" title="Fibonacci sequence" class="mw-redirect">Fibonacci sequence</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=5" title="Edit section: Fibonacci sequence">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>WHATSON? 672974ee-081f-4648-9519-83865ae81769</p>
<pre>
fib
  where
    fib = 0 fby ( 1 fby fib + next fib );
  end
</pre>
<h3><span class="mw-headline" id="Total_of_a_Sequence">Total of a Sequence</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=6" title="Edit section: Total of a Sequence">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>WHATSON? 330de2c3-77be-4b0e-a291-a495ae234259</p>
<pre>
total
  where
     total = 0 fby total + x
  end;
</pre>
<h3><span class="mw-headline" id="Running_Average">Running Average</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=7" title="Edit section: Running Average">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>WHATSON? 820b1a5e-9a2c-4e7e-b630-0060ad868fd2</p>
<pre>
running_avg
  where 
     sum = first(input) fby sum + next(input);
     n = 1 fby n + 1;
     running_avg = sum / n;
  end;
</pre>
<h3><span class="mw-headline" id="Prime_numbers"><a href="/wiki/Prime_number" title="Prime number">Prime numbers</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=8" title="Edit section: Prime numbers">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>WHATSON? 2474dfa5-1c5b-4773-a52f-6cd360a47587</p>
<pre>
prime
  where
     prime = 2 fby (n whenever <a href="/wiki/Isprime" title="Isprime" class="mw-redirect">isprime</a>(n));
     n = 3 fby n+2;
     isprime(n) = not(divs) asa divs or prime*prime &gt; N
                     where
                       N is current n;
                       divs = N mod prime eq 0;
                     end;
  end
</pre>
<h4><span class="mw-headline" id="Dataflow_diagram"><a href="/wiki/Dataflow_diagram" title="Dataflow diagram" class="mw-redirect">Dataflow diagram</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=9" title="Edit section: Dataflow diagram">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>WHATSON? 8e4b224c-7405-4f3e-a409-1fac10d4767b</p>
<pre>
 ---+1&lt;--- --&gt;isprime----
 |         |              |
 |         |              V
  -&gt;fby---------------&gt;whenever---&gt;
     ^
     |
     2
</pre>
<h3><span class="mw-headline" id="Quick_sort"><a href="/wiki/Quick_sort" title="Quick sort" class="mw-redirect">Quick sort</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=10" title="Edit section: Quick sort">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>WHATSON? f5f1c3fb-919e-434a-9551-3dea135dbdd0</p>
<pre>
qsort(a) = if eof(first a) then a else follow(qsort(b0),qsort(b1)) fi
  where
     p = first a &lt; a;
     b0 = a whenever p;
     b1 = a whenever not p;
     follow(x,y) = if xdone then y upon xdone else x fi
                     where
                        xdone = iseod x fby xdone or iseod x; 
                     end
  end
</pre>
<h4><span class="mw-headline" id="Data_flow_diagram">Data flow diagram</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=11" title="Edit section: Data flow diagram">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>WHATSON? b1e881bd-cfd8-4d0a-9f99-54e544afce03</p>
<pre>
    --------&gt; whenever -----&gt; qsort ---------
   |             ^                           |
   |             |                           |
   |            not                          |
   |             ^                           |
   |---&gt; first   |                           |
   |       |     |                           |
   |       V     |                           |
   |---&gt; less ---                            |
   |             |                           |
   |             V                           V
---+--------&gt; whenever -----&gt; qsort -----&gt; conc -------&gt; ifthenelse -----&gt;
   |                                                       ^   ^
   |                                                       |   |
    --------&gt; next ----&gt; first ------&gt; iseod --------------    |
   |                                                           |
    -----------------------------------------------------------
</pre>
<h3><span class="mw-headline" id="Square_root"><a href="/wiki/Square_root" title="Square root">Square root</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=12" title="Edit section: Square root">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>WHATSON? 71424b1d-aeda-4794-bbd0-ee626f3999b0</p>
<pre>
sqroot(avg(square(a)))
  where
     square(x) = x*x;
     avg(y)    = mean
        where
          n = 1 fby n+1;
          mean = first y fby mean + d;
          d = (next y - mean)/(n+1);
        end;
     sqroot(z) = approx asa  err &lt; 0.0001
        where
          Z is current z;
          approx = Z/2 fby (approx + Z/approx)/2;
          err    = abs(square(approx)-Z);
        end;
   end
</pre>
<h3><span class="mw-headline" id="Hamming_problem"><a href="/wiki/Hamming_problem" title="Hamming problem" class="mw-redirect">Hamming problem</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=13" title="Edit section: Hamming problem">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>WHATSON? ef38e024-8dd9-4d29-98d4-1325233eae7a</p>
<pre>
h
   where
     h = 1 fby merge(merge(2 * h, 3 * h), 5 * h);
     merge(x,y) = if xx &lt;= yy then xx else yy fi
        where 
          xx = x upon xx &lt;= yy;
          yy = y upon yy &lt;= xx;
        end;
   end;
</pre>
<h4><span class="mw-headline" id="Dataflow_Diagram_2">Dataflow Diagram</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=14" title="Edit section: Dataflow Diagram">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>WHATSON? 103dec2f-4c97-48b4-a1df-c5ae3ea6b901</p>
<pre>
  --------------------*2---------
 |       -------------*3---------|
 |      |           --*5---------|
 |      |          |             |
 |      V          V             |
  ---&gt;merge-----&gt;merge-----&gt;fby--------&gt;
                             ^
                             |
                             1
</pre>
<h2><span class="mw-headline" id="External_links">External links</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Lucid_(programming_language)&amp;action=edit&amp;section=15" title="Edit section: External links">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="http://code.google.com/p/plucid/">pLucid</a></li>
<li><a rel="nofollow" class="external text" href="http://c2.com/cgi/wiki?LucidLanguage">Language overview</a></li>
<li><a rel="nofollow" class="external text" href="https://web.archive.org/web/20110514103454/http://hopl.murdoch.edu.au/showlanguage2.prx?exp=960">Evolution of Lucid Archived</a> May 14, 2011 at the <a href="/wiki/Wayback_Machine" title="Wayback Machine">Wayback Machine</a></li>
<li><a rel="nofollow" class="external text" href="https://web.archive.org/web/20070629223241/http://i.csc.uvic.ca/home/hei/hei.ise">Bill Wadge's home page Archived</a> June 29, 2007 at the <a href="/wiki/Wayback_Machine" title="Wayback Machine">Wayback Machine</a></li>
<li><a rel="nofollow" class="external text" href="http://www.artima.com/weblogs/viewpost.jsp?thread=102839">Fluid Programming in Lucid</a></li>
<li><a rel="nofollow" class="external text" href="http://www.haskell.org/haskellwiki/Lucid">Lucid page of HaskellWiki</a></li>
<li><a rel="nofollow" class="external text" href="http://i.csc.uvic.ca/home/hei/lup/contents.html">Programming in Lucid</a></li>
<li><a rel="nofollow" class="external text" href="https://web.archive.org/web/20070205192205/http://i.csc.uvic.ca/home/hei/ei/contents.ise">An Eductive Interpreter Archived</a> February 5, 2007 at the <a href="/wiki/Wayback_Machine" title="Wayback Machine">Wayback Machine</a></li>
<li><a rel="nofollow" class="external text" href="https://web.archive.org/web/20070205192128/http://i.csc.uvic.ca/home/LucidPrimer/LPS.ise">Lucid Primer Archived</a> February 5, 2007 at the <a href="/wiki/Wayback_Machine" title="Wayback Machine">Wayback Machine</a></li>
<li><a rel="nofollow" class="external text" href="http://newton.cs.concordia.ca/~gipsy/">GIPSY</a></li>
<li><a rel="nofollow" class="external text" href="https://web.archive.org/web/20001005232835/http://www2.csl.sri.com/glu/index.html">Granular Lucid Archived</a> October 5, 2000 at the <a href="/wiki/Wayback_Machine" title="Wayback Machine">Wayback Machine</a></li>
<li><a rel="nofollow" class="external text" href="http://sites.google.com/site/quilweb">The Quil Language Website</a></li>
</ul>
