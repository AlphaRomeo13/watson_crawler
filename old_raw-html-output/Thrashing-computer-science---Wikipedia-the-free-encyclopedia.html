<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Thrashing (computer science)</span></h1>
<p>In <a href="/wiki/Computer_science" title="Computer science">computer science</a>, <b>thrashing</b> occurs when a computer's <a href="/wiki/Virtual_memory" title="Virtual memory">virtual memory</a> subsystem is in a constant state of <a href="/wiki/Paging" title="Paging">paging</a>, rapidly exchanging data in memory for data on disk, to the exclusion of most application-level processing.<sup id="cite_ref-1" class="reference"><a href="#cite_note-1"><span>[</span>1<span>]</span></a></sup> This causes the performance of the computer to degrade or collapse. The situation may continue indefinitely until the underlying cause is addressed.</p>
<p></p>
<h2>Contents</h2>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Causes"><span class="tocnumber">2</span> <span class="toctext">Causes</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Solutions"><span class="tocnumber">3</span> <span class="toctext">Solutions</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Other_uses"><span class="tocnumber">4</span> <span class="toctext">Other uses</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#References"><span class="tocnumber">6</span> <span class="toctext">References</span></a></li>
</ul>
<p></p>
<h2><span class="mw-headline" id="Overview">Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Thrashing_(computer_science)&amp;action=edit&amp;section=1" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>If a <a href="/wiki/Process_(computing)" title="Process (computing)">process</a> does not have enough pages, thrashing is a high <a href="/wiki/Paging" title="Paging">paging</a> activity, and the <a href="/wiki/Page_fault" title="Page fault">page fault</a> rate is high. This leads to low CPU utilization. In modern computers, thrashing may occur in the paging system (if there is not sufficient <a href="/wiki/Physical_memory" title="Physical memory" class="mw-redirect">physical memory</a> or the disk access time is overly long), or in the communications system (especially in conflicts over internal bus access), etc. Depending on the configuration and algorithms involved, the <i><a href="/wiki/Throughput" title="Throughput">throughput</a></i> and <i><a href="/wiki/Latency_(engineering)" title="Latency (engineering)">latency</a></i> of a system may degrade by multiple <a href="/wiki/Orders_of_magnitude" title="Orders of magnitude" class="mw-redirect">orders of magnitude</a>. <i>Thrashing</i> is a state in which the CPU performs 'productive' work less and 'swapping' more. The CPU is busy in swapping pages, so much that it can not respond to users' programs as much as required. <i>Thrashing</i> occurs when there are too many pages in memory, and each page refers to another page. The real memory shortens in capacity to have all the pages in it, so it uses 'virtual memory'. When each page in execution demands that page that is not currently in real memory (RAM) it places some pages on virtual memory and adjusts the required page on RAM. If the CPU is too busy in doing this task, thrashing occurs.</p>
<h2><span class="mw-headline" id="Causes">Causes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Thrashing_(computer_science)&amp;action=edit&amp;section=2" title="Edit section: Causes">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In <a href="/wiki/Virtual_memory" title="Virtual memory">virtual memory</a> systems, thrashing may be caused by programs or workloads that present insufficient <a href="/wiki/Locality_of_reference" title="Locality of reference">locality of reference</a>: if the <a href="/wiki/Working_set" title="Working set">working set</a> of a program or a workload cannot be effectively held within physical memory, then constant data swapping, <i>i.e.,</i> thrashing, may occur. The term was first used during the tape operating system days to describe the sound the tapes made when data was being rapidly written to and read from them. Many older low-end computers have insufficient RAM (memory) for modern usage patterns and increasing the amount of memory can often cause the computer to run noticeably faster. This speed increase is due to the reduced amount of paging necessary.</p>
<p>An example of this sort of situation occurred on the <a href="/wiki/IBM_System/370" title="IBM System/370">IBM System/370</a> series <a href="/wiki/Mainframe_computer" title="Mainframe computer">mainframe computer</a>, in which a particular instruction could consist of an execute instruction (which crosses a page boundary) that points to a move instruction (which itself also crosses a page boundary), targeting a move of data from a source that crosses a page boundary, to a target of data that also crosses a page boundary. The total number of pages thus being used by this particular instruction is eight, and all eight pages must be present in memory at the same time. If the operating system allocates fewer than eight pages of actual memory, when it attempts to swap out some part of the instruction or data to bring in the remainder, the instruction will again page fault, and it will thrash on every attempt to restart the failing instruction.</p>
<h2><span class="mw-headline" id="Solutions">Solutions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Thrashing_(computer_science)&amp;action=edit&amp;section=3" title="Edit section: Solutions">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To resolve thrashing due to excessive paging, a user can do any of the following:</p>
<ul>
<li>Increase the amount of RAM in the computer (generally the best long-term solution).</li>
<li>Decrease the number of programs being run on the computer.</li>
<li>Replace programs that are memory-heavy with equivalents that use less memory.</li>
<li>Assign working priorities to programs, i.e. low,normal,high.</li>
<li>Improve <a href="/wiki/Locality_of_reference" title="Locality of reference">spatial locality</a> by replacing loops like:</li>
</ul>
<p>WHATSON? 42ea3877-6f68-4934-bbef-53d60d982ef8</p>
<pre class="de1">
 <span class="co1">// recall that in C, arrays use Row-major order</span>
 <span class="kw4">int</span> m<span class="br0">[</span><span class="nu0">256</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">256</span><span class="br0">]</span><span class="sy0">;</span> 
 <span class="kw1">for</span> <span class="br0">(</span>k<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> k<span class="sy0">&lt;</span><span class="nu0">256</span><span class="sy0">;</span> k<span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span> 
   <span class="kw1">for</span> <span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span><span class="nu0">256</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span> 
     m<span class="br0">[</span>i<span class="br0">]</span><span class="br0">[</span>k<span class="br0">]</span> <span class="sy0">=</span> something<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> 
   <span class="br0">}</span> 
 <span class="br0">}</span>
</pre>
<p>WHATSON? b9db8acc-9b84-4280-bc03-d8ba0d713b9d</p>
<pre class="de1">
  <span class="kw4">int</span> m<span class="br0">[</span><span class="nu0">256</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">256</span><span class="br0">]</span><span class="sy0">;</span> 
  <span class="kw1">for</span> <span class="br0">(</span>i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span><span class="nu0">256</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span> 
    <span class="kw1">for</span> <span class="br0">(</span>k<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> k<span class="sy0">&lt;</span><span class="nu0">256</span><span class="sy0">;</span> k<span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="co1">// consecutive values of k reside in adjacent memory locations </span>
      m<span class="br0">[</span>i<span class="br0">]</span><span class="br0">[</span>k<span class="br0">]</span> <span class="sy0">=</span> something<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> 
    <span class="br0">}</span> 
  <span class="br0">}</span>
</pre>
<h2><span class="mw-headline" id="Other_uses">Other uses</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Thrashing_(computer_science)&amp;action=edit&amp;section=4" title="Edit section: Other uses">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The term is also used for misses between other levels of the <a href="/wiki/Memory_hierarchy" title="Memory hierarchy">memory hierarchy</a>, not just paging (memory to disk): when a small set of faster storage space, intended to be used to speed up access to a larger set of slower storage space, is accessed in a way that cancels out any benefits from the faster storage. An example of this is <b><span id="cache_thrashing">cache thrashing</span></b>, where main memory is accessed in a pattern that leads to multiple main memory locations competing for the same cache lines, resulting in excessive <a href="/wiki/CPU_cache#Cache_miss" title="CPU cache">cache misses</a>. This is most problematic for caches that have low <a href="/wiki/CPU_cache#Associativity" title="CPU cache">associativity</a>. Quite similar is <b>TLB thrashing</b>, where the <a href="/wiki/Translation_lookaside_buffer" title="Translation lookaside buffer">translation lookaside buffer</a> (TLB) is overrun by more requests than it can handle efficiently.</p>
<h2><span class="mw-headline" id="See_also">See also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Thrashing_(computer_science)&amp;action=edit&amp;section=5" title="Edit section: See also">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><a href="/wiki/Congestion_collapse" title="Congestion collapse" class="mw-redirect">Congestion collapse</a></li>
<li><a href="/wiki/Resource_contention" title="Resource contention">Resource contention</a></li>
<li><a href="/wiki/Out_of_memory" title="Out of memory">Out of memory</a></li>
<li><a href="/wiki/Software_aging" title="Software aging">Software aging</a></li>
</ul>
<h2><span class="mw-headline" id="References">References</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Thrashing_(computer_science)&amp;action=edit&amp;section=6" title="Edit section: References">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><b><a href="#cite_ref-1">^</a></b></span> <span class="reference-text"><span class="citation journal">Denning, Peter J. (1968). <a rel="nofollow" class="external text" href="http://www.cs.uwaterloo.ca/~brecht/courses/702/Possible-Readings/vm-and-gc/thrashing-denning-afips-1968.pdf">"Thrashing: Its causes and prevention"</a>. <i>Proceedings AFIPS, Fall Joint Computer Conference</i> <b>33</b>: 915–922<span class="reference-accessdate">. Retrieved 2012-02-15</span>.</span><span title="ctx_ver=Z39.88-2004&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AThrashing+%28computer+science%29&amp;rft.atitle=Thrashing%3A+Its+causes+and+prevention&amp;rft.au=Denning%2C+Peter+J.&amp;rft.aufirst=Peter+J.&amp;rft.aulast=Denning&amp;rft.date=1968&amp;rft.genre=article&amp;rft_id=http%3A%2F%2Fwww.cs.uwaterloo.ca%2F~brecht%2Fcourses%2F702%2FPossible-Readings%2Fvm-and-gc%2Fthrashing-denning-afips-1968.pdf&amp;rft.jtitle=Proceedings+AFIPS%2C+Fall+Joint+Computer+Conference&amp;rft.pages=915-922&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.volume=33" class="Z3988"><span style="display:none;"> </span></span></span></li>
</ol>
