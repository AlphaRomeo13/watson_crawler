<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Mock object</span></h1>
<p>In <a href="/wiki/Object-oriented_programming" title="Object-oriented programming">object-oriented programming</a>, <b>mock objects</b> are simulated objects that mimic the behavior of real objects in controlled ways. A programmer typically creates a mock object to test the behavior of some other object, in much the same way that a car designer uses a <a href="/wiki/Crash_test_dummy" title="Crash test dummy">crash test dummy</a> to <a href="/wiki/Simulation" title="Simulation">simulate</a> the dynamic behavior of a human in vehicle impacts.</p>
<p></p>
<h2>Contents</h2>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Reasons_for_use"><span class="tocnumber">1</span> <span class="toctext">Reasons for use</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Technical_details"><span class="tocnumber">2</span> <span class="toctext">Technical details</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Mocks.2C_fakes_and_stubs"><span class="tocnumber">2.1</span> <span class="toctext">Mocks, fakes and stubs</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Setting_expectations"><span class="tocnumber">2.2</span> <span class="toctext">Setting expectations</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Writing_log_strings"><span class="tocnumber">2.3</span> <span class="toctext">Writing log strings</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Use_in_test-driven_development"><span class="tocnumber">3</span> <span class="toctext">Use in test-driven development</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Limitations"><span class="tocnumber">4</span> <span class="toctext">Limitations</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#References"><span class="tocnumber">6</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#External_links"><span class="tocnumber">7</span> <span class="toctext">External links</span></a></li>
</ul>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Mocks.2C_fakes_and_stubs"><span class="tocnumber">2.1</span> <span class="toctext">Mocks, fakes and stubs</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Setting_expectations"><span class="tocnumber">2.2</span> <span class="toctext">Setting expectations</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Writing_log_strings"><span class="tocnumber">2.3</span> <span class="toctext">Writing log strings</span></a></li>
</ul>
<p></p>
<h2><span class="mw-headline" id="Reasons_for_use">Reasons for use</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Mock_object&amp;action=edit&amp;section=1" title="Edit section: Reasons for use">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In a <a href="/wiki/Unit_test" title="Unit test" class="mw-redirect">unit test</a>, mock objects can <a href="/wiki/Simulation" title="Simulation">simulate</a> the behavior of complex, real objects and are therefore useful when a real object is impractical or impossible to incorporate into a unit test. If an actual object has any of the following characteristics, it may be useful to use a mock object in its place:</p>
<ul>
<li>the object supplies <a href="/wiki/Nondeterministic_algorithm" title="Nondeterministic algorithm">non-deterministic</a> results (e.g., the current time or the current temperature);</li>
<li>it has states that are difficult to create or reproduce (e.g., a network error);</li>
<li>it is slow (e.g., a complete <a href="/wiki/Database" title="Database">database</a>, which would have to be initialized before the test);</li>
<li>it does not yet exist or may change behavior;</li>
<li>it would have to include information and methods exclusively for testing purposes (and not for its actual task).</li>
</ul>
<p>For example, an alarm clock program which causes a bell to ring at a certain time might get the current time from the outside world. To test this, the test must wait until the alarm time to know whether it has rung the bell correctly. If a mock object is used in place of the real object, it can be programmed to provide the bell-ringing time (whether it is actually that time or not) so that the alarm clock program can be tested in isolation.</p>
<h2><span class="mw-headline" id="Technical_details">Technical details</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Mock_object&amp;action=edit&amp;section=2" title="Edit section: Technical details">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Mock objects have the same <a href="/wiki/Interface_(computing)#Software_interfaces_in_object_oriented_languages" title="Interface (computing)">interface</a> as the real objects they mimic, allowing a client object to remain unaware of whether it is using a real object or a mock object. Many available mock object frameworks allow the programmer to specify which, and in what order, <a href="/wiki/Method_(computer_science)" title="Method (computer science)" class="mw-redirect">methods</a> will be invoked on a mock object and what <a href="/wiki/Parameter_(computer_science)" title="Parameter (computer science)" class="mw-redirect">parameters</a> will be passed to them, as well as what values will be returned. Thus, the behavior of a complex object such as a network socket can be mimicked by a mock object, allowing the programmer to discover whether the object being tested responds appropriately to the wide variety of states such mock objects may be in.</p>
<h3><span class="mw-headline" id="Mocks.2C_fakes_and_stubs">Mocks, fakes and stubs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Mock_object&amp;action=edit&amp;section=3" title="Edit section: Mocks, fakes and stubs">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Some authors<sup id="cite_ref-1" class="reference"><a href="#cite_note-1"><span>[</span>1<span>]</span></a></sup> draw a distinction between <i>fake</i> and <i>mock</i> objects. Fakes are the simpler of the two, simply implementing the same <a href="/wiki/Interface_(computing)#Software_interfaces_in_object-oriented_languages" title="Interface (computing)">interface</a> as the object that they represent and returning pre-arranged responses. Thus a fake object merely provides a set of <a href="/wiki/Method_stub" title="Method stub">method stubs</a>.</p>
<p>Mock objects in this sense do a little more: their method implementations contain <a href="/wiki/Assertion_(computing)" title="Assertion (computing)" class="mw-redirect">assertions</a> of their own. This means that a true mock, in this sense, will examine the context of each call— perhaps checking the order in which its methods are called, perhaps performing tests on the data passed into the method calls as arguments.</p>
<p>In the book "The Art of Unit Testing"<sup id="cite_ref-2" class="reference"><a href="#cite_note-2"><span>[</span>2<span>]</span></a></sup> mocks are described as a fake object that helps decide whether a test failed or passed by verifying whether an interaction with an object occurred. Everything else is defined as a stub. In that book, "Fakes" are anything that is not real. Based on their usage, they are either stubs or mocks.</p>
<h3><span class="mw-headline" id="Setting_expectations">Setting expectations</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Mock_object&amp;action=edit&amp;section=4" title="Edit section: Setting expectations">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Consider an example where an authorization sub-system has been mocked. The mock object implements an <code>isUserAllowed(task : Task) : <b>boolean</b></code><sup id="cite_ref-3" class="reference"><a href="#cite_note-3"><span>[</span>3<span>]</span></a></sup> method to match that in the real authorization class. Many advantages follow if it also exposes an <code>isAllowed : boolean</code> property, which is not present in the real class. This allows test code easily to set the expectation that a user will, or will not, be granted permission in the next call and therefore readily to test the behavior of the rest of the system in either case.</p>
<p>Similarly, a mock-only setting could ensure that subsequent calls to the sub-system will cause it to <a href="/wiki/Exception_handling" title="Exception handling">throw an exception</a>, or <a href="/wiki/Hang_(computing)" title="Hang (computing)">hang</a> without responding, or return <code><a href="/wiki/Nullable_type" title="Nullable type">null</a></code> etc. Thus it is possible to develop and test <a href="/wiki/Client%E2%80%93server_model" title="Client–server model">client</a> behaviors for all realistic fault conditions in <a href="/wiki/Front-end_and_back-end" title="Front-end and back-end" class="mw-redirect">back-end</a> sub-systems as well as for their expected responses. Without such a simple and flexible mock system, testing each of these situations may be too laborious for them to be given proper consideration.</p>
<h3><span class="mw-headline" id="Writing_log_strings">Writing log strings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Mock_object&amp;action=edit&amp;section=5" title="Edit section: Writing log strings">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A mock database object's <code>save(person : Person)</code> method may not contain much (if any) implementation code. It might or might not check the existence and perhaps the <a href="/wiki/Data_validation" title="Data validation">validity</a> of the Person object passed in for saving (see fake vs. mock discussion above), but beyond that there might be no other implementation.</p>
<p>This is a missed opportunity. The mock method could add an entry to a public log string. The entry need be no more than "Person saved",<sup id="cite_ref-Beck03_4-0" class="reference"><a href="#cite_note-Beck03-4"><span>[</span>4<span>]</span></a></sup><sup class="reference" style="white-space:nowrap;">:146–7</sup> or it may include some details from the person object instance, such as a name or ID. If the test code also checks the final contents of the log string after various series of operations involving the mock database then it is possible to verify that in each case exactly the expected number of database saves have been performed. This can find otherwise invisible performance-sapping bugs, for example, where a developer, nervous of losing data, has coded repeated calls to <code>save()</code> where just one would have sufficed.</p>
<h2><span class="mw-headline" id="Use_in_test-driven_development">Use in test-driven development</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Mock_object&amp;action=edit&amp;section=6" title="Edit section: Use in test-driven development">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Programmers working with the <a href="/wiki/Test-driven_development" title="Test-driven development">test-driven development</a> (TDD) method make use of mock objects when writing software. Mock objects meet the <a href="/wiki/Interface_(computer_science)" title="Interface (computer science)" class="mw-redirect">interface</a> requirements of, and stand in for, more complex real ones; thus they allow programmers to write and <a href="/wiki/Unit_testing" title="Unit testing">unit-test</a> functionality in one area without actually calling complex underlying or collaborating <a href="/wiki/Class_(computer_science)" title="Class (computer science)" class="mw-redirect">classes</a>.<sup id="cite_ref-Beck03_4-1" class="reference"><a href="#cite_note-Beck03-4"><span>[</span>4<span>]</span></a></sup><sup class="reference" style="white-space:nowrap;">:144–5</sup> Using mock objects allows developers to focus their tests on the behavior of the system under test (SUT) without worrying about its dependencies. For example, testing a complex algorithm based on multiple objects being in particular states can be clearly expressed using mock objects in place of real objects.</p>
<p>Apart from complexity issues and the benefits gained from this <a href="/wiki/Separation_of_concerns" title="Separation of concerns">separation of concerns</a>, there are practical speed issues involved. Developing a realistic piece of software using TDD may easily involve several hundred unit tests. If many of these induce communication with databases, web services and other <a href="/wiki/Inter-process_communication" title="Inter-process communication">out-of-process</a> or <a href="/wiki/Computer_network" title="Computer network">networked</a> systems, then the suite of unit tests will quickly become too slow to be run regularly. This in turn leads to bad habits and a reluctance by the developer to maintain the basic tenets of TDD.</p>
<p>When mock objects are replaced by real ones then the end-to-end functionality will need further testing. These will be <a href="/wiki/Integration_testing" title="Integration testing">integration tests</a> rather than unit tests.</p>
<h2><span class="mw-headline" id="Limitations">Limitations</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Mock_object&amp;action=edit&amp;section=7" title="Edit section: Limitations">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The use of mock objects can closely couple the <a href="/wiki/Unit_test" title="Unit test" class="mw-redirect">unit tests</a> to the actual implementation of the code that is being tested. For example, many mock object frameworks allow the developer to check the order of and number of times that mock object methods were invoked by the real object being tested; subsequent <a href="/wiki/Refactoring" title="Refactoring" class="mw-redirect">refactoring</a> of the code that is being tested could therefore cause the test to fail even though all mocked object methods still obey the contract of the previous implementation. This illustrates that unit tests should test a method's external behavior rather than its internal implementation. Over-use of mock objects as part of a suite of unit tests can result in a dramatic increase in the amount of maintenance that needs to be performed on the tests themselves during system evolution as refactoring takes place. The improper maintenance of such tests during evolution could allow bugs to be missed that would otherwise be caught by unit tests that use instances of real classes. Conversely, simply mocking one method might require far less configuration than setting up an entire real class and therefore reduce maintenance needs.</p>
<p>Mock objects have to accurately model the behavior of the object they are mocking, which can be difficult to achieve if the object being mocked comes from another developer or project or if it has not even been written yet. If the behavior is not modeled correctly then the unit tests may register a pass even though a failure would occur at run time under the same conditions that the unit test is exercising, thus rendering the unit test inaccurate.<sup id="cite_ref-5" class="reference"><a href="#cite_note-5"><span>[</span>5<span>]</span></a></sup></p>
<h2><span class="mw-headline" id="See_also">See also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Mock_object&amp;action=edit&amp;section=8" title="Edit section: See also">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><a href="/wiki/Method_(computer_science)#Kinds_of_methods" title="Method (computer science)" class="mw-redirect">Abstract method</a></li>
<li><a href="/wiki/Dummy_code" title="Dummy code" class="mw-redirect">Dummy code</a></li>
<li><a href="/wiki/Hamcrest" title="Hamcrest">Hamcrest</a></li>
<li><a href="/wiki/Method_stub" title="Method stub">Method stub</a></li>
<li><a href="/wiki/Test_double" title="Test double">Test double</a></li>
</ul>
<h2><span class="mw-headline" id="References">References</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Mock_object&amp;action=edit&amp;section=9" title="Edit section: References">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><b><a href="#cite_ref-1">^</a></b></span> <span class="reference-text"><span class="citation book">Feathers, Michael (2005). "Sensing and separation". <i>Working effectively with legacy code</i>. NJ: Prentice Hall. p. 23 et seq. <a href="/wiki/International_Standard_Book_Number" title="International Standard Book Number">ISBN</a> <a href="/wiki/Special:BookSources/0-13-117705-2" title="Special:BookSources/0-13-117705-2">0-13-117705-2</a>.</span><span title="ctx_ver=Z39.88-2004&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMock+object&amp;rft.atitle=Working+effectively+with+legacy+code&amp;rft.au=Feathers%2C+Michael&amp;rft.aufirst=Michael&amp;rft.aulast=Feathers&amp;rft.btitle=Sensing+and+separation&amp;rft.date=2005&amp;rft.genre=bookitem&amp;rft.isbn=0-13-117705-2&amp;rft.pages=23+et+seq&amp;rft.place=NJ&amp;rft.pub=Prentice+Hall&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook" class="Z3988"><span style="display:none;"> </span></span></span></li>
<li id="cite_note-2"><span class="mw-cite-backlink"><b><a href="#cite_ref-2">^</a></b></span> <span class="reference-text"><span class="citation book">Osherove, Roy (2009). "Interaction testing with mock objects et seq". <i>The art of unit testing</i>. Manning. <a href="/wiki/International_Standard_Book_Number" title="International Standard Book Number">ISBN</a> <a href="/wiki/Special:BookSources/978-1-933988-27-6" title="Special:BookSources/978-1-933988-27-6">978-1-933988-27-6</a>.</span><span title="ctx_ver=Z39.88-2004&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMock+object&amp;rft.atitle=The+art+of+unit+testing&amp;rft.aufirst=Roy&amp;rft.aulast=Osherove&amp;rft.au=Osherove%2C+Roy&amp;rft.btitle=Interaction+testing+with+mock+objects+et+seq&amp;rft.date=2009&amp;rft.genre=bookitem&amp;rft.isbn=978-1-933988-27-6&amp;rft.pub=Manning&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook" class="Z3988"><span style="display:none;"> </span></span></span></li>
<li id="cite_note-3"><span class="mw-cite-backlink"><b><a href="#cite_ref-3">^</a></b></span> <span class="reference-text">These examples use a nomenclature that is similar to that used in <a href="/wiki/Unified_Modeling_Language" title="Unified Modeling Language">Unified Modeling Language</a></span></li>
<li id="cite_note-Beck03-4"><span class="mw-cite-backlink">^ <a href="#cite_ref-Beck03_4-0"><sup><i><b>a</b></i></sup></a> <a href="#cite_ref-Beck03_4-1"><sup><i><b>b</b></i></sup></a></span> <span class="reference-text"><span class="citation book">Beck, Kent (2003). <i>Test-Driven Development By Example</i>. Boston: Addison Wesley. <a href="/wiki/International_Standard_Book_Number" title="International Standard Book Number">ISBN</a> <a href="/wiki/Special:BookSources/0-321-14653-0" title="Special:BookSources/0-321-14653-0">0-321-14653-0</a>.</span><span title="ctx_ver=Z39.88-2004&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMock+object&amp;rft.au=Beck%2C+Kent&amp;rft.aufirst=Kent&amp;rft.aulast=Beck&amp;rft.btitle=Test-Driven+Development+By+Example&amp;rft.date=2003&amp;rft.genre=book&amp;rft.isbn=0-321-14653-0&amp;rft.place=Boston&amp;rft.pub=Addison+Wesley&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook" class="Z3988"><span style="display:none;"> </span></span></span></li>
<li id="cite_note-5"><span class="mw-cite-backlink"><b><a href="#cite_ref-5">^</a></b></span> <span class="reference-text"><a rel="nofollow" class="external text" href="http://www.onjava.com/pub/a/onjava/2004/02/11/mocks.html#Approaches">InJava.com</a> to Mocking | O'Reilly Media</span></li>
</ol>
<h2><span class="mw-headline" id="External_links">External links</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Mock_object&amp;action=edit&amp;section=10" title="Edit section: External links">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><span class="citation web">Tim Mackinnon (8 September 2009). <a rel="nofollow" class="external text" href="http://www.mockobjects.com/2009/09/brief-history-of-mock-objects.html">"A Brief History of Mock Objects"</a>. Mockobjects.com/.</span><span title="ctx_ver=Z39.88-2004&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMock+object&amp;rft.aulast=Tim+Mackinnon&amp;rft.au=Tim+Mackinnon&amp;rft.btitle=A+Brief+History+of+Mock+Objects&amp;rft.date=8+September+2009&amp;rft.genre=book&amp;rft_id=http%3A%2F%2Fwww.mockobjects.com%2F2009%2F09%2Fbrief-history-of-mock-objects.html&amp;rft.pub=Mockobjects.com%2F&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook" class="Z3988"><span style="display:none;"> </span></span></li>
<li><a rel="nofollow" class="external text" href="http://xunitpatterns.com/Test%20Double.html">Test Doubles</a>: a section of a book on unit testing patterns.</li>
<li><a rel="nofollow" class="external text" href="http://www.mockobjects.com">All about mock objects! Portal concerning mock objects</a></li>
<li><span class="citation web"><a rel="nofollow" class="external text" href="https://web.archive.org/web/20070504084844/http://www-128.ibm.com/developerworks/rational/library/oct06/pollice/">"Using mock objects for complex unit tests"</a>. IBM developerWorks. 16 October 2006. Archived from <a rel="nofollow" class="external text" href="http://www-128.ibm.com/developerworks/rational/library/oct06/pollice/">the original</a> on 4 May 2007.</span><span title="ctx_ver=Z39.88-2004&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3AMock+object&amp;rft.btitle=Using+mock+objects+for+complex+unit+tests&amp;rft.date=16+October+2006&amp;rft.genre=book&amp;rft_id=http%3A%2F%2Fwww-128.ibm.com%2Fdeveloperworks%2Frational%2Flibrary%2Foct06%2Fpollice%2F&amp;rft.pub=IBM+developerWorks&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook" class="Z3988"><span style="display:none;"> </span></span></li>
<li><a rel="nofollow" class="external text" href="http://www.ibm.com/developerworks/java/library/j-mocktest/index.html">Unit testing with mock objects</a> IBM developerWorks</li>
<li><a rel="nofollow" class="external text" href="http://martinfowler.com/articles/mocksArentStubs.html">Mocks Aren't Stubs</a> (<a href="/wiki/Martin_Fowler" title="Martin Fowler">Martin Fowler</a>) Article about developing tests with Mock objects. Identifies and compares the "classical" and "mockist" schools of testing. Touches on points about the impact on design and maintenance.</li>
</ul>
