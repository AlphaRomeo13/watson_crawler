<h1>Questions and Exercises: Concurrency</h1>
<h2>Questions</h2>
<ol>
<li>Can you pass a <code>Thread</code> object to <code>Executor.execute</code>? Would such an invocation make sense?</li>
</ol>
<h2>Exercises</h2>
<ol>
<li>Compile and run 
<a class="SourceLink" target="_blank" href="BadThreads.java" onclick="showCode('../../../displayCode.html', 'BadThreads.java'); return false;"><code><code>BadThreads.java</code></code></a>:
<div class="codeblock"><pre>

public class BadThreads {

    static String message;

    private static class CorrectorThread
        extends Thread {

        public void run() {
            try {
                sleep(1000); 
            } catch (InterruptedException e) {}
            // Key statement 1:
            message = "Mares do eat oats."; 
        }
    }

    public static void main(String args[])
        throws InterruptedException {

        (new CorrectorThread()).start();
        message = "Mares do not eat oats.";
        Thread.sleep(2000);
        // Key statement 2:
        System.out.println(message);
    }
}
</pre></div>
<p>The application should print out "Mares do eat oats." Is it guaranteed to always do this? If not, why not? Would it help to change the parameters of the two invocations of <code>Sleep</code>? How would you guarantee that all changes to <code>message</code> will be visible in the main thread?</p>
</li>
<li>Modify the producer-consumer example in <a href="../guardmeth.html">Guarded Blocks</a> to use a standard library class instead of the <code>Drop</code> class.</li>
</ol>
<p>WHATSON? 849e5838-66d4-4559-8c8c-b4670e64e003</p>
<pre>

public class BadThreads {

    static String message;

    private static class CorrectorThread
        extends Thread {

        public void run() {
            try {
                sleep(1000); 
            } catch (InterruptedException e) {}
            // Key statement 1:
            message = "Mares do eat oats."; 
        }
    }

    public static void main(String args[])
        throws InterruptedException {

        (new CorrectorThread()).start();
        message = "Mares do not eat oats.";
        Thread.sleep(2000);
        // Key statement 2:
        System.out.println(message);
    }
}
</pre>
<p>The application should print out "Mares do eat oats." Is it guaranteed to always do this? If not, why not? Would it help to change the parameters of the two invocations of <code>Sleep</code>? How would you guarantee that all changes to <code>message</code> will be visible in the main thread?</p>
<p>
<a class="TutorialLink" target="_top" href="answers.html">Check your answers.</a></p>
