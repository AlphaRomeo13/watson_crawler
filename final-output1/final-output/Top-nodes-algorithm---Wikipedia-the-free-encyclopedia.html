<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Top-nodes-algorithm---Wikipedia-the-free-encyclopedia.html</title></head>
<body>
<h1>Top-nodes algorithm</h1>
<p>The <b>top-nodes algorithm</b> is an algorithm for managing a resource reservation calendar.</p>
<p>It is used when a resource is shared among lots of users (for example bandwidth in a telecommunication link, or disk capacity in a large data center).</p>
<p>The algorithm allows</p>
<ul>
<li>to check if an amount of resource is available during a specific period of time,</li>
<li>to reserve an amount of resource for a specific period of time,</li>
<li>to delete a previous reservation,</li>
<li>to move the calendar forward (the calendar covers a defined duration, and it must be moved forward as time goes by).</li>
</ul>
<p></p>
<h2>Contents</h2>
<ul>
<li>1 Principle</li>
<li>2 Performance</li>
<li>3 External links</li>
<li>4 References</li>
</ul>
<p></p>
<h2>Principle</h2>
<p>The calendar is stored as a binary tree where leafs represent elementary time periods. Other nodes represent the period of time covered by all their descendants.</p>
<p>The period of time covered by a reservation is represented by a set of "top-nodes". This set is the minimal set of nodes that exactly cover the reservation period of time.</p>
<p>A node of the binary tree is a "top-node" for a given reservation if</p>
<ul>
<li>all its descendants are inside the reservation period of time,</li>
</ul>
<p>and</p>
<ul>
<li>it is the root node, or at least one descendant of the parent node is outside of the reservation period of time.</li>
</ul>
<p>The following value is stored in each node:</p>
<p>WHATSON? e5099c2a-b32e-4696-b08b-c5f2b6f64189</p>
<pre>
q(node) = max(q(left child), q(right child))
          + total amount of reserved resource for all reservations having this node as a "top-node"
</pre>
<p>(for code optimization, the two parts of this sum are usually stored separately.)</p>
<h2>Performance</h2>
<p>The advantage of this algorithm is that the time to register a new resource reservation depends only on the calendar size (it does not depend on the total number of reservations).</p>
<p>Let "n" be the number of elementary periods in the calendar.</p>
<p>The maximal number of "top-nodes" for a given reservation is 2.log n.</p>
<ul>
<li>to check if an amount of resource is available during a specific period of time : O(log n)</li>
<li>to reserve an amount of resource for a specific period of time : O(log n)</li>
<li>to delete a previous reservation : O(log n)</li>
<li>to move the calendar forward : O(log n + M.log n)</li>
</ul>
<p>where M is the number of reservations that are active during the added calendar periods.</p>
<p>(M = 0 if reservations are not allowed after the end of the calendar.)</p>
<h2>External links</h2>
<ul>
<li>(French) C source code</li>
</ul>
</body>
</html>